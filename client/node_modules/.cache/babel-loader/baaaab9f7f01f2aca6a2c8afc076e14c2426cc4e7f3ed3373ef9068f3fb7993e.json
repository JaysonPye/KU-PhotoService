{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import'../styles/PicturesPage.css';import Gallery from'react-image-gallery';import'react-image-gallery/styles/css/image-gallery.css';import Banner from'./Banner';import{CustomCloseButton}from'../images/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SeasonalPage(){const location=useLocation();const foundSchool=location.state&&location.state.foundSchool;const[selectedActivityIndex,setSelectedActivityIndex]=useState(null);const[selectedImageIndex,setSelectedImageIndex]=useState(null);const[activityData,setActivityData]=useState([]);useEffect(()=>{function fetchSeasonalPictures(){fetch('http://localhost:5000/seasonal-pictures',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({activities:location.state.activities})}).then(response=>{if(!response.ok){console.error('Error fetching seasonal pictures:',response.status);throw new Error('Error fetching seasonal pictures');}return response.json();}).then(data=>{console.log('Seasonal Pictures:',data);setActivityData(data);}).catch(error=>{console.error('Error fetching seasonal pictures:',error);});}if(location.state&&location.state.activities){fetchSeasonalPictures();}},[location.state]);//Navigates to the seasonal date clicked\nconst navigateToSection=sectionId=>{const element=document.getElementById(sectionId);if(element){const bannerHeight=document.querySelector('.banner').clientHeight;const offset=bannerHeight;const elementOffset=element.getBoundingClientRect().top+window.scrollY;const scrollToY=elementOffset-offset;window.scrollTo({top:scrollToY,behavior:'smooth'});}};const handleDownload=fileId=>{const link=document.createElement('a');link.href=\"https://drive.google.com/uc?export=download&id=\".concat(fileId);link.download='';link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);};const closeModal=()=>{setSelectedImageIndex(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"pictures-container\",children:[activityData?/*#__PURE__*/_jsx(Banner,{foundSchool:foundSchool,activityData:activityData,navigateToSection:navigateToSection}):/*#__PURE__*/_jsx(Banner,{foundSchool:foundSchool}),window.innerWidth<=768&&foundSchool&&/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-school-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-school-name\",children:foundSchool}),/*#__PURE__*/_jsx(\"hr\",{className:\"mobile-divider\"})]}),activityData.map((activity,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"activity-section\",id:\"activity-\".concat(activity.date.replace(/[^a-zA-Z0-9-_]/g,'-')),children:[/*#__PURE__*/_jsx(\"h2\",{children:activity.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",activity.date]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"thumbnails\",children:activity.files.map((file,fileIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"thumbnail\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:file.thumbnailUrl,alt:\"Thumbnail \".concat(fileIndex),onClick:()=>{setSelectedImageIndex(fileIndex);console.log(fileIndex);setSelectedActivityIndex(index);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:e=>{e.stopPropagation();handleDownload(file.id);},children:\"Download\"})]},fileIndex))})})]},index)),selectedImageIndex!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal centered\",children:[/*#__PURE__*/_jsx(CustomCloseButton,{onClick:closeModal,className:\"close-button\"}),/*#__PURE__*/_jsx(\"button\",{className:\"download-button\",onClick:()=>handleDownload(activityData[selectedActivityIndex].files[selectedImageIndex].id),children:\"DOWNLOAD\"}),/*#__PURE__*/_jsx(Gallery,{items:activityData[selectedActivityIndex].files.map(file=>({original:file.imageUrl,thumbnail:file.thumbnailUrl})),startIndex:selectedImageIndex,showIndex:false,showThumbnails:false,lazyLoad:true,showBullets:false,showFullscreenButton:false,showPlayButton:false,onClose:closeModal,onSlide:currentIndex=>setSelectedImageIndex(currentIndex)})]})})]});}export default SeasonalPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","Gallery","Banner","CustomCloseButton","jsx","_jsx","jsxs","_jsxs","SeasonalPage","location","foundSchool","state","selectedActivityIndex","setSelectedActivityIndex","selectedImageIndex","setSelectedImageIndex","activityData","setActivityData","fetchSeasonalPictures","fetch","method","headers","body","JSON","stringify","activities","then","response","ok","console","error","status","Error","json","data","log","catch","navigateToSection","sectionId","element","document","getElementById","bannerHeight","querySelector","clientHeight","offset","elementOffset","getBoundingClientRect","top","window","scrollY","scrollToY","scrollTo","behavior","handleDownload","fileId","link","createElement","href","concat","download","style","display","appendChild","click","removeChild","closeModal","className","children","innerWidth","map","activity","index","id","date","replace","name","files","file","fileIndex","src","thumbnailUrl","alt","onClick","e","stopPropagation","items","original","imageUrl","thumbnail","startIndex","showIndex","showThumbnails","lazyLoad","showBullets","showFullscreenButton","showPlayButton","onClose","onSlide","currentIndex"],"sources":["C:/Kidsup/KUPhotosite/NEWFRONTEND/photoservice-frontend/client/src/components/SeasonalPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport '../styles/PicturesPage.css';\r\nimport Gallery from 'react-image-gallery';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\nimport Banner from './Banner';\r\nimport { CustomCloseButton } from '../images/icons';\r\n\r\nfunction SeasonalPage() {\r\n  const location = useLocation();\r\n  const foundSchool = location.state && location.state.foundSchool;\r\n  const [selectedActivityIndex, setSelectedActivityIndex] = useState(null);\r\n  const [selectedImageIndex, setSelectedImageIndex] = useState(null);\r\n  const [activityData, setActivityData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    function fetchSeasonalPictures() {\r\n      fetch('http://localhost:5000/seasonal-pictures', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ activities: location.state.activities }),\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            console.error('Error fetching seasonal pictures:', response.status);\r\n            throw new Error('Error fetching seasonal pictures');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          console.log('Seasonal Pictures:', data);\r\n          setActivityData(data);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching seasonal pictures:', error);\r\n        });\r\n    }\r\n\r\n    if (location.state && location.state.activities) {\r\n      fetchSeasonalPictures();\r\n    }\r\n  }, [location.state]);\r\n\r\n//Navigates to the seasonal date clicked\r\nconst navigateToSection = (sectionId) => {\r\n  const element = document.getElementById(sectionId);\r\n  if (element) {\r\n    const bannerHeight = document.querySelector('.banner').clientHeight;\r\n    const offset = bannerHeight;\r\n    const elementOffset = element.getBoundingClientRect().top + window.scrollY;\r\n    const scrollToY = elementOffset - offset;\r\n    window.scrollTo({ top: scrollToY, behavior: 'smooth' });\r\n  }\r\n};\r\n\r\n  const handleDownload = (fileId) => {\r\n    const link = document.createElement('a');\r\n    link.href = `https://drive.google.com/uc?export=download&id=${fileId}`;\r\n    link.download = '';\r\n    link.style.display = 'none';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n\r\n  const closeModal = () => {\r\n    setSelectedImageIndex(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"pictures-container\">\r\n  {activityData ? (\r\n    <Banner foundSchool={foundSchool} activityData={activityData} navigateToSection={navigateToSection} />\r\n  ) : (\r\n    <Banner foundSchool={foundSchool} />\r\n  )}\r\n  \r\n      {/* render school name based on mobile view */}\r\n      {window.innerWidth <= 768 && foundSchool && (\r\n        <div className=\"mobile-school-info\">\r\n          <div className=\"mobile-school-name\">{foundSchool}</div>\r\n          <hr className=\"mobile-divider\" />\r\n        </div>\r\n      )}\r\n  {activityData.map((activity, index) => (\r\n    \r\n    <div key={index} className=\"activity-section\" id={`activity-${activity.date.replace(/[^a-zA-Z0-9-_]/g, '-')}`}>\r\n    <h2>{activity.name}</h2>\r\n    <p>Date: {activity.date}</p>\r\n    <div>\r\n    <div className=\"thumbnails\">\r\n      {activity.files.map((file, fileIndex) => (\r\n        <div key={fileIndex} className=\"thumbnail\">\r\n          <div className=\"image-container\">\r\n            <img\r\n              src={file.thumbnailUrl}\r\n              alt={`Thumbnail ${fileIndex}`}\r\n              onClick={() => { setSelectedImageIndex(fileIndex); console.log(fileIndex);     setSelectedActivityIndex(index);}}\r\n              \r\n            />\r\n          </div>\r\n          <button\r\n            className=\"button\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              handleDownload(file.id);\r\n            }}\r\n          >\r\n            Download\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  </div>\r\n  \r\n  </div>\r\n))}\r\n      {selectedImageIndex !== null && (\r\n        <div className=\"modal-container\">\r\n          <div className=\"modal centered\">\r\n            <CustomCloseButton onClick={closeModal} className=\"close-button\" />\r\n            <button\r\n              className=\"download-button\"\r\n              onClick={() => handleDownload(activityData[selectedActivityIndex].files[selectedImageIndex].id)}\r\n            >\r\n              DOWNLOAD\r\n            </button>\r\n            <Gallery\r\n              items={activityData[selectedActivityIndex].files.map((file) => ({\r\n                original: file.imageUrl,\r\n                thumbnail: file.thumbnailUrl,\r\n              }))}\r\n              startIndex={selectedImageIndex}\r\n              showIndex={false}\r\n              showThumbnails={false}\r\n              lazyLoad={true}\r\n              showBullets={false}\r\n              showFullscreenButton={false}\r\n              showPlayButton={false}\r\n              onClose={closeModal}\r\n              onSlide={(currentIndex) => setSelectedImageIndex(currentIndex)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SeasonalPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}