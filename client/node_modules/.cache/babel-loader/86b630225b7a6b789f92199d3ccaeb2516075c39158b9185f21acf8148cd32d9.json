{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'../styles/Spinner.css';import'../styles/LoginPage.css';import loginImage from'../images/home-img-1.jpg';import Banner from'./Banner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[code,setCode]=useState('');const[errorMessage,setErrorMessage]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();// Handles login submission\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code})});if(response.ok){const data=await response.json();if(data.activities){// It's a seasonal login with activities\nnavigate(\"/seasonal-pictures\",{state:{activities:data.activities,foundSchool:data.school}});}else if(data.folder_id){// party page\nnavigate(\"/pictures/\".concat(data.folder_id),{state:{foundSchool:data.school}});}else{// Handle any other type of response\nconsole.error('Unknown response type');}}else{console.error('Login failed');setErrorMessage('コードが間違っています');}}catch(error){console.error('Error:',error);setErrorMessage('An error occurred. Please try again later.');}finally{setTimeout(()=>{setErrorMessage('');// Clear error message after 3 seconds\n},3000);setLoading(false);// Set loading to false after the request (success or failure)\n}setCode('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page-container\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome back,\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"code\",name:\"code\",value:code,onChange:e=>setCode(e.target.value),required:true,className:\"login-input\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",type:\"submit\",children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:loginImage,alt:\"Login Image\",className:\"login-image\"})})]})})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","loginImage","Banner","jsx","_jsx","jsxs","_jsxs","LoginPage","code","setCode","errorMessage","setErrorMessage","loading","setLoading","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","activities","state","foundSchool","school","folder_id","concat","console","error","setTimeout","className","children","onSubmit","htmlFor","type","id","name","value","onChange","target","required","src","alt"],"sources":["C:/Kidsup/KUPhotosite/NEWFRONTEND/photoservice-frontend/client/src/components/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/Spinner.css'; \r\nimport '../styles/LoginPage.css';\r\nimport loginImage from '../images/home-img-1.jpg';\r\nimport Banner from './Banner';\r\n\r\nfunction LoginPage() {\r\n    const [code, setCode] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n    // Handles login submission\r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      setLoading(true);\r\n  \r\n      try {\r\n        const response = await fetch('/api/login', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ code }),\r\n        });\r\n  \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n  \r\n          if (data.activities) {\r\n            // It's a seasonal login with activities\r\n            navigate(`/seasonal-pictures`, {\r\n              state: { activities: data.activities, foundSchool: data.school },\r\n            });\r\n          } else if (data.folder_id) {\r\n            // party page\r\n            navigate(`/pictures/${data.folder_id}`, {\r\n              state: { foundSchool: data.school },\r\n            });\r\n          } else {\r\n            // Handle any other type of response\r\n            console.error('Unknown response type');\r\n          }\r\n        } else {\r\n          console.error('Login failed');\r\n          setErrorMessage('コードが間違っています');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        setErrorMessage('An error occurred. Please try again later.');\r\n      } finally {\r\n        setTimeout(() => {\r\n          setErrorMessage(''); // Clear error message after 3 seconds\r\n        }, 3000);\r\n        setLoading(false); // Set loading to false after the request (success or failure)\r\n      }\r\n  \r\n      setCode('');\r\n    };\r\n  \r\n    return (\r\n      <div className=\"login-page-container\">\r\n        <Banner />\r\n      <div className=\"login-container\">\r\n\r\n        <div className=\"login-box\">\r\n          <div className=\"login-content\">\r\n            <h1>Welcome back,</h1>\r\n            <h2>パスワード</h2>\r\n            {loading && <div className=\"spinner\"></div>}\r\n            {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n            <form onSubmit={handleSubmit}>\r\n              <label htmlFor=\"code\"></label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"code\"\r\n                name=\"code\"\r\n                value={code}\r\n                onChange={(e) => setCode(e.target.value)}\r\n                required\r\n                className=\"login-input\"\r\n              />\r\n              <br />\r\n              <br />\r\n              <button className=\"login-button\" type=\"submit\">\r\n                ログイン\r\n              </button>\r\n            </form>\r\n          </div>\r\n          <div className=\"login-image-container\">\r\n            <img src={loginImage} alt=\"Login Image\" className=\"login-image\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}