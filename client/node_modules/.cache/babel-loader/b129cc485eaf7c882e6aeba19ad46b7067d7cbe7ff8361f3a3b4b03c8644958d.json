{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useLocation}from'react-router-dom';import'../styles/PicturesPage.css';import Gallery from'react-image-gallery';import'react-image-gallery/styles/css/image-gallery.css';import Banner from'./Banner';import{CustomCloseButton}from'../images/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PicturesPage(){const{folderId}=useParams();const[files,setFiles]=useState([]);const[selectedImageIndex,setSelectedImageIndex]=useState(null);const location=useLocation();const foundSchool=location.state&&location.state.foundSchool;const handleDownload=fileId=>{const link=document.createElement('a');link.href=\"https://drive.google.com/uc?export=download&id=\".concat(fileId);link.download='';link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);};useEffect(()=>{console.log('Fetching pictures for folderId:',folderId);// Make a GET request to /pictures endpoint with the folderId\nfetch(\"http://localhost:5000/pictures?folder_id=\".concat(folderId)).then(response=>response.json()).then(data=>setFiles(data.files)).catch(error=>console.error('Error:',error));},[folderId]);const images=files.map(file=>({original:file.imageUrl,thumbnail:file.thumbnailUrl}));const closeModal=()=>{setSelectedImageIndex(null);};// Add event listeners to close the modal on clicking off-screen or pressing Escape\nuseEffect(()=>{const handleKeyPress=event=>{if(event.key==='Escape'){closeModal();}};const handleClickOutside=event=>{if(event.target.classList.contains('modal-container')){closeModal();}};window.addEventListener('keydown',handleKeyPress);window.addEventListener('click',handleClickOutside);return()=>{window.removeEventListener('keydown',handleKeyPress);window.removeEventListener('click',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pictures-container\",children:[/*#__PURE__*/_jsx(Banner,{foundSchool:foundSchool}),window.innerWidth<=768&&foundSchool&&/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-school-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-school-name\",children:foundSchool}),/*#__PURE__*/_jsx(\"hr\",{className:\"mobile-divider\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"picture-list\",children:files.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"thumbnail\",onClick:()=>setSelectedImageIndex(index),children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:file.thumbnailUrl,alt:file.name})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:e=>{e.stopPropagation();handleDownload(file.id);},children:\"Download\"})]},file.id))}),selectedImageIndex!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal centered\",children:[/*#__PURE__*/_jsx(CustomCloseButton,{onClick:closeModal,className:\"close-button\"}),/*#__PURE__*/_jsx(\"button\",{className:\"download-button\",onClick:()=>handleDownload(files[selectedImageIndex].id),children:\"DOWNLOAD\"}),/*#__PURE__*/_jsx(Gallery,{items:images,startIndex:selectedImageIndex,showIndex:false,showThumbnails:false,lazyLoad:true,showBullets:false,showFullscreenButton:false,showPlayButton:false,onClose:closeModal,onSlide:currentIndex=>setSelectedImageIndex(currentIndex)})]})})]});}export default PicturesPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useLocation","Gallery","Banner","CustomCloseButton","jsx","_jsx","jsxs","_jsxs","PicturesPage","folderId","files","setFiles","selectedImageIndex","setSelectedImageIndex","location","foundSchool","state","handleDownload","fileId","link","document","createElement","href","concat","download","style","display","body","appendChild","click","removeChild","console","log","fetch","then","response","json","data","catch","error","images","map","file","original","imageUrl","thumbnail","thumbnailUrl","closeModal","handleKeyPress","event","key","handleClickOutside","target","classList","contains","window","addEventListener","removeEventListener","className","children","innerWidth","index","onClick","src","alt","name","e","stopPropagation","id","items","startIndex","showIndex","showThumbnails","lazyLoad","showBullets","showFullscreenButton","showPlayButton","onClose","onSlide","currentIndex"],"sources":["C:/Kidsup/KUPhotosite/NEWFRONTEND/photoservice-frontend/client/src/components/PicturesPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport '../styles/PicturesPage.css';\r\nimport Gallery from 'react-image-gallery';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\nimport Banner from './Banner';\r\nimport { CustomCloseButton} from '../images/icons';\r\n\r\n\r\nfunction PicturesPage() {\r\n  const { folderId } = useParams();\r\n  const [files, setFiles] = useState([]);\r\n  const [selectedImageIndex, setSelectedImageIndex] = useState(null);\r\n  const location = useLocation();\r\n  const foundSchool = location.state && location.state.foundSchool;\r\n\r\n  const handleDownload = (fileId) => {\r\n    const link = document.createElement('a');\r\n    link.href = `https://drive.google.com/uc?export=download&id=${fileId}`;\r\n    link.download = '';\r\n    link.style.display = 'none';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('Fetching pictures for folderId:', folderId);\r\n    // Make a GET request to /pictures endpoint with the folderId\r\n    fetch(`http://localhost:5000/pictures?folder_id=${folderId}`)\r\n      .then((response) => response.json())\r\n      .then((data) => setFiles(data.files))\r\n      .catch((error) => console.error('Error:', error));\r\n  }, [folderId]);\r\n\r\n  const images = files.map((file) => ({\r\n    original: file.imageUrl,\r\n    thumbnail: file.thumbnailUrl,\r\n  }));\r\n\r\n  const closeModal = () => {\r\n    setSelectedImageIndex(null);\r\n  };\r\n\r\n  // Add event listeners to close the modal on clicking off-screen or pressing Escape\r\n  useEffect(() => {\r\n    const handleKeyPress = (event) => {\r\n      if (event.key === 'Escape') {\r\n        closeModal();\r\n      }\r\n    };\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (event.target.classList.contains('modal-container')) {\r\n        closeModal();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    window.addEventListener('click', handleClickOutside);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyPress);\r\n      window.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"pictures-container\">\r\n      <Banner foundSchool={foundSchool} />\r\n\r\n      {/* render school name based on mobile view */}\r\n      {window.innerWidth <= 768 && foundSchool && (\r\n        <div className=\"mobile-school-info\">\r\n          <div className=\"mobile-school-name\">{foundSchool}</div>\r\n          <hr className=\"mobile-divider\" />\r\n        </div>\r\n      )}\r\n      <div className=\"picture-list\">\r\n        {files.map((file, index) => (\r\n          <div\r\n            key={file.id}\r\n            className=\"thumbnail\"\r\n            onClick={() => setSelectedImageIndex(index)}\r\n          >\r\n            <div className=\"image-container\">\r\n            <img src={file.thumbnailUrl} alt={file.name} />\r\n            </div>\r\n            <button\r\n              className=\"button\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                handleDownload(file.id);\r\n              }}\r\n            >\r\n              Download\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {selectedImageIndex !== null && (\r\n        <div className=\"modal-container\">\r\n          <div className=\"modal centered\">\r\n          <CustomCloseButton onClick={closeModal} className=\"close-button\" />\r\n            <button\r\n              className=\"download-button\"\r\n              onClick={() => handleDownload(files[selectedImageIndex].id)}\r\n            >\r\n              DOWNLOAD\r\n            </button>\r\n            <Gallery\r\n              items={images}\r\n              startIndex={selectedImageIndex}\r\n              showIndex={false}\r\n              showThumbnails={false}\r\n              lazyLoad={true}\r\n              showBullets={false}\r\n              showFullscreenButton={false}\r\n              showPlayButton={false}\r\n              onClose={closeModal}\r\n              onSlide={(currentIndex) => setSelectedImageIndex(currentIndex)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PicturesPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}